<ion-header-bar align-title="left" class="bar bar-header bar-light" id="mainHeader">
    <button id="menuOpener" class="button ion-navicon button-icon" ng-if="$root.currentUser && $root.smallScreen" ng-click="toggleMenu()"
            ng-class="{'red': myItems.dirtyItems.length}" ></button>
    <div class="h1 title " ng-class="{'margin-left-menu' : $root.smallScreen, 'padding-horizontal' : $root.smallScreen}">
        SCHEDULOGY <span>BETA</span>
    </div>

    <div class="buttons">
        <span class="button button-outline button-dark" ng-click="modalService.openModal('help');" style="color:black;">
            <i class="icon ion-help-circled" ></i>
            Help
        </span>
    </div>

    <div class="topLauncher" ng-if="$root.smallScreen">
        <span class="button button-assertive" ng-click="$('.topLauncherTypes').toggle();
            myItems.newCurrentItem('event');
            modalService.openModal('event');" style="background-color:#387ef5;">
            Event
        </span>
        <span class="button button-assertive" ng-click="$('.topLauncherTypes').toggle();
            myItems.newCurrentItem('task');
            modalService.openModal('task');" style="background-color: #ffa400;">
            Task
        </span>
        <span class="button button-assertive" ng-click="$('.topLauncherTypes').toggle();
            myItems.newCurrentItem('reminder');
            modalService.openModal('reminder');" style="background-color: #bd0000;">
            Reminder
        </span>
    </div>
</ion-header-bar>

<ion-side-menus>
    <!-- Left menu -->
    <ion-side-menu side="left" expose-aside-when="(min-width:{{$root.settings.smallScreen}}px)">
        <ion-content class="leftMenu">
            <div class="list">
                <span class="item item-small" style="border-top:0;text-align:center;font-size:0.85em;color:#aaa;">
                    Logged-in as:<br />
                    <span>{{$root.currentUser.username}}</span>
                </span>
                <a class="item item-icon-left item-small" ng-if="myItems.dirtyItems.length" ng-click="toggleMenu();
                    modalService.openModal('dirtyTasks');">
                    <i class="icon ion-alert assertive"></i>
                    Unscheduled Tasks
                </a>

                <a id="newevent" class="item item-icon-left item-small" ng-click="toggleMenu();
                    myItems.newCurrentItem('event');
                    modalService.openModal('event');">
                    <i class="icon ion-plus positive"></i>
                    New Event
                </a>

                <a id="newtask" class="item item-icon-left item-small" ng-click="toggleMenu();
                    myItems.newCurrentItem('task');
                    modalService.openModal('task');">
                    <i class="icon ion-plus positive" style="color:#ffa400"></i>
                    New Task
                </a>

                <a id="newreminder" class="item item-icon-left item-small" ng-click="toggleMenu();
                    myItems.newCurrentItem('reminder');
                    modalService.openModal('reminder');">
                    <i class="icon ion-plus" style="color:#bd0000"></i>
                    New Reminder
                </a>
            </div>

            <div class="list">

                <a class="item item-icon-left item-small" ng-click="toggleMenu();
                    modalService.openModal('iCalUpload');">
                    <i class="icon ion-upload positive"></i>
                    Import from iCal
                </a>

                <a class="item item-icon-left item-small" ng-click="toggleMenu();
                    modalService.openModal('removeAll');">
                    <i class="icon ion-trash-b dark"></i>  
                    Delete all Tasks
                </a>
                <a class="item item-icon-left item-small" ng-click="toggleMenu();
                    modalService.openModal('users');">
                    <i class="icon ion-person-stalker positive"></i>
                    Manage Users
                </a>
                <a class="item item-icon-left item-small" ng-click="toggleMenu();
                    modalService.openModal('resources');">
                    <i class="icon ion-levels positive"></i>
                    Manage Resources
                </a>
            </div>

            <div class="list">
                <a ng-if="!$root.smallScreen" class="item item-icon-left item-small" ng-click="toggleMenu();
                    runTour();">
                    <i class="icon ion-university "></i>  
                    Tour
                </a>

                <a id="helplink" class="item item-icon-left item-small" ng-click="toggleMenu();
                    modalService.openModal('help');">
                    <i class="icon ion-help" ></i>
                    Help
                </a>

                <a class="item item-icon-left dark item-small" ng-click="toggleMenu();
                    modalService.openModal('feedback');">
                    <i class="icon ion-mic-a dark"></i>
                    Send Feedback
                </a>
            </div>

            <div class="list">
                <a class="item item-icon-left item-small" ng-click="toggleMenu();
                    modalService.openModal('changeUsername');">
                    <i class="icon ion-person dark"></i>
                    Change Username
                </a>

                <a class="item item-icon-left item-small" ng-click="toggleMenu();
                    modalService.openModal('changePassword');">
                    <i class="icon ion-locked dark"></i>
                    Change Password
                </a>
            </div>

            <div class="list">
                <a class="item item-icon-left item-small" ng-click="toggleMenu();
                    $root.goToLogin()">
                    <i class="icon ion-log-out dark"></i>
                    Logout
                </a>
            </div>

            <div class="list" style="margin-top:40px;">
                <a class="item item-icon-left item-xsmall" ng-click="toggleMenu();
                    modalService.openModal('privacyPolicy');">
                    Privacy Policy
                </a>

                <a class="item item-icon-left item-xsmall" ng-click="toggleMenu();
                    modalService.openModal('termsOfService');">
                    Terms of Service
                </a>

                <a class="item item-icon-left item-xsmall" href="https://www.schedulogy.com/home" target="_blank">
                    SCHEDULOGY website
                </a>

                <span class="item item-icon-left item-xsmall">
                    Version: {{$root.settings.appVersion}}
                </span>
            </div>
        </ion-content>
    </ion-side-menu>

    <ion-side-menu-content drag-content="false">
        <ion-content class="has-header no-overflow" has-bouncing="false" scroll="true" zoom="true">
            <div ui-view>

            </div>
        </ion-content>
    </ion-side-menu-content>

</ion-side-menus>

<ion-content has-bouncing="false" scroll="true" ng-show="$root.isOffline || $root.isLoading" style="z-index:20;width:100%;background-color:white;position:absolute;top:44px;bottom:0;left:0;right:0;">
    <div class="app-info-wrapper" ng-show="$root.isOffline">
        <div class="app-info">
            <ion-spinner icon="lines" class="spinner-positive"></ion-spinner>
            <br />
            Waiting for connection
        </div>
    </div>

    <div class="app-info-wrapper" ng-show="$root.isLoading">
        <div class="app-info">
            <ion-spinner icon="lines" class="spinner-positive"></ion-spinner>
            <br />
            Loading
        </div>
    </div>
</ion-content>