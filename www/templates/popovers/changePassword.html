<ion-modal-view>
    <ion-header-bar>
        <h1 class="title">Change Password</h1>
    </ion-header-bar>
    <ion-content has-bouncing="false" class="marginTop5 marginSides5">
        <form name="form" novalidate ng-keyup="$parent.keyUpHandler($event.keyCode, form.$invalid, 'changePassword');">
            <div class="list customFormErrorList">
                <div ng-show="beingSubmitted && form.password.$error.required && !form.password.$pristine" class="item help-block">
                    Please provide a valid password.
                </div>
                <div ng-show="beingSubmitted && (form.password.$error.complexity || form.password.$error.minlength) && !form.password.$pristine" class="item help-block">
                    Password does not meet complexity requirements.
                    <br/>
                    The password has to have 8 or more characters from 2 or more of the groups:
                    <ul>
                        <li>a, b, c, ...</li>
                        <li>A, B, C, ...</li>
                        <li>1, 2, 3, ...</li>
                    </ul>
                </div>
                <div ng-show="beingSubmitted && form.repeatPassword.$error.required && !form.repeatPassword.$pristine" class="item help-block">
                    Please repeat the password.
                </div>
                <div ng-show="beingSubmitted && form.repeatPassword.$error.repeat && !form.repeatPassword.$pristine" class="item help-block">
                    Passwords do not match.
                </div>
                <div ng-show="errorInfo" class="item help-block help-block-error">
                    {{errorInfo}}
                </div>
            </div>

            <div class="list">
                <label class="item bold">
                    The password has to have 8 or more characters from 2 or more of the groups:
                    <br />
                    <ul>
                        <li>a, b, c, ...</li>
                        <li>A, B, C, ...</li>
                        <li>1, 2, 3, ...</li>
                    </ul>
                </label>
                <label class="item item-input">
                    <div class="input-label">
                        Password
                    </div>
                    <input autofocus type="password" ng-model="$parent.password" id="mainEdit" complex-password minlength="8" required name="password"
                           ng-class="{ 'has-error' : beingSubmitted && (form.password.$error.required || form.password.$error.complexity || form.password.$error.minlength) && !form.password.$pristine }">
                </label>

                <label class="item item-input">
                    <div class="input-label">
                        Repeat password
                    </div>
                    <input type="password" ng-model="$parent.confirmPassword" repeat-password="password" required name="repeatPassword"
                           ng-class="{ 'has-error' : beingSubmitted && (form.repeatPassword.$error.required || form.repeatPassword.$error.repeat) && !form.repeatPassword.$pristine }">
                </label>
            </div>

            <button class="button button-block button-positive button-single" ng-disabled="form.$invalid" ng-click="$parent.save('changePassword');">
                Save
            </button>
            <button class="button button-block button-outline button-dark button-single marginTop1" ng-click="$parent.closeModal('changePassword');">
                Cancel
            </button>
        </form>
    </ion-content>
</ion-modal-view>