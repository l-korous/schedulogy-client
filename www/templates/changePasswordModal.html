<ion-modal-view ng-controller="ChangePasswordModalCtrl">
    <ion-header-bar>
        <h1 class="title">Change Password</h1>
    </ion-header-bar>
    <ion-content has-bouncing="false">
        <form name="$parent.form" novalidate>
            <div class="list customFormErrorList">
                <div ng-show="form.password.$error.required && !form.password.$pristine" class="item help-block">
                    Please provide a valid password.
                </div>
                <div ng-show="(form.password.$error.complexity || form.password.$error.minlength) && !form.password.$pristine" class="item help-block">
                    Password does not meet complexity requirements.
                    <br/>
                    The password has to have {{passwordRules.minLength}} or more characters from {{passwordRules.minGroups}} or more of the groups:
                    <ul>
                        <li>a, b, c, ...</li>
                        <li>A, B, C, ...</li>
                        <li>1, 2, 3, ...</li>
                    </ul>
                </div>
                <div ng-show="form.repeatPassword.$error.required && !form.repeatPassword.$pristine" class="item help-block">
                    Please repeat the password.
                </div>
                <div ng-show="form.repeatPassword.$error.repeat && !form.repeatPassword.$pristine" class="item help-block">
                    Passwords do not match.
                </div>
                <div ng-show="errorInfo" class="item help-block help-block-error item-no-wrap">
                    {{errorInfo}}
                </div>
            </div>

            <div class="list">
                <label class="item bold">
                    The password has to have {{passwordRules.minLength}} or more characters from {{passwordRules.minGroups}} or more of the groups:
                    <br />
                    <ul>
                        <li>a, b, c, ...</li>
                        <li>A, B, C, ...</li>
                        <li>1, 2, 3, ...</li>
                    </ul>
                </label>
                <label class="item item-input">
                    <div class="input-label">
                        Password
                    </div>
                    <input autofocus type="password" ng-model="data.password" id="primaryInput" complex-password required name="password"
                           ng-class="{ 'has-error' : (form.password.$error.required || form.password.$error.complexity || form.password.$error.minlength) && !form.password.$pristine }">
                </label>

                <label class="item item-input">
                    <div class="input-label">
                        Repeat password
                    </div>
                    <input type="password" ng-model="data.confirmPassword" repeat-password="password" required name="repeatPassword"
                           ng-class="{ 'has-error' : (form.repeatPassword.$error.required || form.repeatPassword.$error.repeat) && !form.repeatPassword.$pristine }">
                </label>
            </div>

            <div class="row">
                <div class="col-50 padding-horizontal padding-top">
                    <button class="button button-block button-positive" ng-disabled="form.$invalid || form.$pristine" ng-click="save();">
                        Save
                    </button>

                </div>
                <div class="col-50 padding-horizontal padding-top">
                    <button class="button button-block button-dark button-outline" ng-click="close();">
                        Cancel
                    </button>   
                </div>
            </div>
        </form>
    </ion-content>
</ion-modal-view>